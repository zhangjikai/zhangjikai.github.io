<!DOCTYPE html>
<html lang="en">

<head>

    <!--<meta charset="utf-8">-->
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>首页</title>

    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?ff100361cdce95dd4c8fb96b4009f7bc";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <!-- Bootstrap Core CSS -->
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bootstrap/switch/css/bootstrap3/bootstrap-switch.min.css" rel="stylesheet">
    <!--<link href="../bootstrap/css/font-awesome.css" rel="stylesheet">
    <link href="css/build.css" rel="stylesheet">-->

    <!-- Custom CSS -->

    <style>
        body {
            font-family: "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;
            background-color: #EBF5F3;
        }

        * {
            margin: 0;
        }

        html, body {
            height: 100%;
        }

        .navbar-custom {
            /*color: #FFFFFF;*/
            background-color: #56b9ab;

        }

        .navbar-brand,
        .navbar-nav li a {
            line-height: 55px;
            height: 55px;
            padding-top: 0px;
            font-family: "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;

        }

        .navbar-default .navbar-nav > li > a {
            color: #ffffff;
        }

        .navbar-default .navbar-nav > li > a:hover {
            color: #175A94;
        }

        .page-header {
            font-family: "Arial", "Microsoft YaHei", "黑体", "宋体", sans-serif;
            /* border-bottom: 1px solid #bbb;*/
        }

        hr {
            border-bottom: 1px solid #bbb;
        }

        .img_border {
            border: 1px solid #bbb;
        }

        @media screen and (min-width: 800px) {
            .container {
                width: 800px;
            }
        }

        @media screen and (min-width: 800px) {
            .center_toaster {
                right: 35%;
                width: 30%;
            }
        }

        @media screen and (min-width: 400px) and (max-width: 799px) {
            .center_toaster {
                right: 25%;
                width: 50%;
            }
        }

        @media screen and (min-width: 200px ) and (max-width: 399px) {
            .center_toaster {
                right: 10%;
                width: 80%;
            }
        }

        .row a {
            text-decoration: none;
        }

        .row a:hover {
            text-decoration: none;
        }

        .addMaigin {
            margin-bottom: 30px;
        }

        .change_font {
            font-size: 1.5em;
        }

        .button_width {
            width: 4em;
        }

        .button_width2 {
            width: 4em;
        }

        .wrapper {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin: 0 auto -6em;
        }

        .push {
            height: 6em;
        }

        .footer,  {
            height: 4em;
        }

    </style>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<div class="wrapper">
    <div class="navbar navbar-default navbar-custom" role="navigation">
        <div class="navbar-header">
            <a class="navbar-brand" href="http://zhangjikai.com/">
                <img alt="zjk" src="../bootstrap/images/logo.png" height="50">
            </a>
        </div>

        <!--<div>
            <ul class="nav navbar-nav" style="float: right">
                <li><a href="#">IE9及以下请访问</a></li>
            </ul>
        </div>-->
    </div>

    <!-- Page Content -->

    <div class="container ">
        <div class="row ">
            <div style="padding:10px; ">
                <form class="bs-example bs-example-form" role="form">
                    <div class="col-lg-12">
                        <div class="input-group input-group-lg">
                            <span class="input-group-addon">编号</span>
                            <input type="text" class="form-control" id="textId">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button" id="msgGet">获取信息</button>
                           </span>
                        </div>
                        <br>

                        <div class="form-group ">
                            <textarea class="form-control custom-control change_font" style="resize:none" rows="8"
                                      placeholder="请输入信息" id="mainText"></textarea>

                        </div>

                        <div class="text-center">
                            <!--<button type="button" class="btn btn-primary button_width" id="msgCopy">全选复制</button>
                            <button type="button" class="btn btn-primary button_width" id="msgPaste"> 粘贴</button>-->
                            <button type="button" class="btn btn-primary button_width" id="msgClear">清空</button>
                            <!--<br/>
                            <br/>-->
                            <button type="button" class="btn btn-primary button_width2 " id="msgSave">保存</button>
                            <div class="bootstrap-switch ">
                                <input type="checkbox" name="onlyOne" data-label-text="阅后即焚" data-on-text="是"
                                       data-off-text="否" onSwitchChange="changeOne">
                            </div>
                        </div>
                    </div>

                </form>
            </div>


        </div>



    </div>
    <div class="push"></div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class=" col-lg-12 text-center">
       <hr>
        <p>若不能正常存取数据，请访问<a href="http://restuse.sinaapp.com/">这里</a></p>
       <!-- <p>Copyright &copy; zhangjk 2015</p>-->
    </div>
    <!-- /.col-lg-12 -->
    <!-- /.row -->
</footer>


<!-- /.container -->

<!-- jQuery -->
<script src="../bootstrap/js/jquery.js" type="text/javascript"></script>
<script src="../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../bootstrap/switch/js/bootstrap-switch.js" type="text/javascript"></script>
<script src="../bootstrap/js/bootstrap-waitingfor.js" type="text/javascript"></script>
<script src="../jquery/jquery.toaster.js" type="text/javascript"></script>

<script type="text/javascript">
    var isOne = false;
    var getUrl = "http://restuse.sinaapp.com/text/";
    var addUrl = "http://restuse.sinaapp.com/add";
    var addOneUrl = "http://restuse.sinaapp.com/one";
    var postUrl = addUrl;

    $("#msgClear").click(function () {
        $("#mainText").val("");

    });

    $("#msgGet").click(function () {
        if ($("#textId").val() == null || $("#textId").val() == "") {
            if ($.support.leadingWhitespace) {
                $.toaster({ priority: 'warning', title: '警告', message: '编号不能为空'});
                return;
            } else {
                alert("警告：编号不能为空");
                return;
            }
        }
        waitingDialog.show();
        //console.log(11);
        handleGet();
    });

    $("#msgSave").click(function () {
        /*console.log(isOne);*/

        if ($("#mainText").val() == null || $("#mainText").val() == "") {
            if ($.support.leadingWhitespace) {
                $.toaster({ priority: 'warning', title: '警告', message: '内容不能为空'});
                return;
            } else {
                alert("警告：内容不能为空");
                return;
            }
        }
        handlePost();
    });

    function changeOne(event, change) {
        isOne = !isOne;
    }

    $(document).ready(function () {
        $("[name='onlyOne']").bootstrapSwitch();
        $('input[name="onlyOne"]').on('switchChange.bootstrapSwitch', function (event, state) {
            isOne = state;
        });
    });

    function handleGet() {

        $.ajax({
            url: getUrl + $("#textId").val(),
            type: 'GET',
            async: true, //默认为true 异步
            dataType: 'JSON',
            error: function (data) {
                setTimeout(function () {
                    waitingDialog.hide();
                    if ($.support.leadingWhitespace) {
                        $.toaster({ priority: 'danger', title: '错误', message: '系统错误，请稍后重试'})
                    } else {
                        alert("错误：系统错误，请稍后重试");
                    }
                }, 300);

            },
            success: function (data) {
                setTimeout(function () {
                    waitingDialog.hide();
                    var obj = eval(data);
                    if (obj.data == "noResult") {
                        $("#mainText").val('');
                        if ($.support.leadingWhitespace) {
                            $.toaster({ priority: 'info', title: '信息', message: '没有对应数据'})
                        } else {
                            alert("信息：没有对应数据");
                        }
                    } else {
                        $("#mainText").val(obj.data);
                    }
                }, 300);

            }
        });
    }

    function handlePost() {
        waitingDialog.show();
        if (isOne) {
            postUrl = addOneUrl;
        } else {
            postUrl = addUrl;
        }
        $.ajax({
            url: postUrl,
            type: 'POST',
            async: true, //默认为true 异步
            dataType: 'JSON',
            data: {msg: $("#mainText").val()},
            error: function () {
                setTimeout(function () {
                    waitingDialog.hide();
                    if ($.support.leadingWhitespace) {
                        $.toaster({ priority: 'danger', title: '错误', message: '系统错误，请稍后重试'})
                    } else {
                        alert("错误：系统错误，请稍后重试");
                    }
                }, 300);


            },
            success: function (data) {
                setTimeout(function () {
                    waitingDialog.hide();
                    var obj = eval(data);
                    if (obj.data == "-1") {
                        if ($.support.leadingWhitespace) {
                            $.toaster({ priority: 'danger', title: '错误', message: '系统错误，请稍后重试'})
                        } else {
                            alert("错误：系统错误，请稍后重试");
                        }
                    } else {
                        $("#textId").val(obj.data);
                    }
                }, 300);


            }
        });
    }

</script>


<script type="text/javascript">
    var JPlaceHolder = {
        //检测
        _check: function () {
            return 'placeholder' in document.createElement('input');
        },
        //初始化
        init: function () {
            if (!this._check()) {
                this.fix();
            }
        },
        //修复
        fix: function () {
            jQuery(':input[placeholder]').each(function (index, element) {
                var self = $(this), txt = self.attr('placeholder');
                self.wrap($('<div></div>').css({position: 'relative', zoom: '1', border: 'none', background: 'none', padding: 'none', margin: 'none'}));
                var pos = self.position(), h = self.outerHeight(true), paddingleft = self.css('padding-left');
                var holder = $('<span></span>').text(txt).css({position: 'absolute', left: pos.left, top: pos.top, height: h, lienHeight: h, paddingLeft: paddingleft, fontSize: '1.5em', color: '#aaa'}).appendTo(self.parent());
                self.focusin(function (e) {
                    holder.hide();
                }).focusout(function (e) {
                    if (!self.val()) {
                        holder.show();
                    }
                });
                holder.click(function (e) {
                    holder.hide();
                    self.focus();
                });
            });
        }
    };
    //执行
    jQuery(function () {
        JPlaceHolder.init();
    });

</script>
</body>

</html>
